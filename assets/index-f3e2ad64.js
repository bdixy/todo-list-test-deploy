(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const c of t.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function l(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?t.credentials="include":e.crossorigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function s(e){if(e.ep)return;e.ep=!0;const t=l(e);fetch(e.href,t)}})();class C{constructor(o){this.text=o,this.isCompleted=!1}}class p{constructor(o,l){this.text=o,this.importance=l,this.alert(this.text,this.importance)}alert(o,l){const s=document.createElement("div"),e=document.createElement("p");switch(e.className="message",e.innerText=o,s.appendChild(e),s.className="alert",l){case"error":s.style.backgroundColor="#e25858";break;case"success":s.style.backgroundColor="#228636";break;case"remove":s.style.backgroundColor="#caae21";break;case"completed":s.style.backgroundColor="#1199e3";break}document.body.appendChild(s),setTimeout(()=>{s.classList.add("active")}),setTimeout(()=>{s.classList.toggle("active")},3e3),setTimeout(()=>{s.remove()},5e3)}}class E{constructor(o){this.todos=JSON.parse(localStorage.getItem("todos"))||[],this.completed=[],this.selectedHtmlElement=o||document.querySelector("#app"),this.render(this.todos)}render(o){this.selectedHtmlElement.innerHTML="",this.layout(),this.addListWithToDo(o)}addToLocalStorage(){localStorage.setItem("todos",JSON.stringify(this.todos))}addToDoToList(o){console.log("addToDoToList",o),o==""||o==null?new p("The field cannot be empty","error"):(this.todos.push(new C(o)),this.addToLocalStorage(),new p("Added new todo","success")),this.render(this.todos)}addListWithToDo(o){const l=document.createElement("ul");l.className="todo_list",o.forEach((s,e)=>{const t=document.createElement("li"),c=document.createElement("input"),d=document.createElement("label"),n=document.createElement("span");n.className="check_box",c.type="checkbox",c.className="check_input",t.innerText=s.text,t.className="todo_item",c.checked=s.isCompleted,s.isCompleted?t.classList.add("completed"):t.classList.remove("completed"),d.appendChild(c),d.appendChild(n),t.insertAdjacentElement("afterbegin",d);const a=document.createElement("div");a.classList="trash",a.addEventListener("click",()=>{l.removeChild(t),this.todos=this.todos.slice(0,e).concat(this.todos.slice(e+1,this.todos.length)),this.addToLocalStorage(),this.render(this.todos),new p("Todo remove","remove")});const i=r=>{s.isCompleted?(s.isCompleted=!1,r.target.classList.remove("completed"),c.checked=!1,this.addToLocalStorage()):(r.target.classList.add("completed"),s.isCompleted=!0,c.checked=!0,this.addToLocalStorage(),new p("Todo is completed","completed"))};n.addEventListener("click",i),t.addEventListener("click",i),t.appendChild(a),l.appendChild(t)}),this.selectedHtmlElement.querySelector(".main").appendChild(l)}layout(){const o=document.createElement("header");o.className="header";const l=document.createElement("img");l.src="../img/logo.svg",l.alt="logo",o.appendChild(l);const s=document.createElement("div");s.className="input_wrapper",o.appendChild(s);const e=document.createElement("input");e.className="input",e.type="text",e.placeholder="Add a new task";const t=document.createElement("button");t.className="button",t.innerText="Create";const c=document.createElement("img");c.src="../img/plus.svg",c.alt="plus",t.appendChild(c),s.appendChild(e),s.appendChild(t),t.addEventListener("click",()=>{this.addToDoToList(e.value),e.value=""}),e.addEventListener("keypress",f=>{f.key==="Enter"&&(this.addToDoToList(e.value),e.value="")});const d=document.createElement("main");d.className="main";const n=document.createElement("div");n.className="list-info";const a=document.createElement("div");a.className="list-total";const i=document.createElement("p");i.className="list-total-text",i.innerText="Total tasks";const r=document.createElement("p");r.className="list-total-count",r.innerText=`${localStorage.getItem("todos")?JSON.parse(localStorage.getItem("todos")).length:"0"}`;const m=document.createElement("div");m.className="list-completed";const h=document.createElement("p");h.className="list-completed-text",h.innerText="Completed tasks";const g=document.createElement("p");g.className="list-completed-count",g.innerText="...",a.appendChild(i),a.appendChild(r),m.appendChild(h),m.appendChild(g),n.appendChild(a),n.appendChild(m),d.appendChild(n),this.selectedHtmlElement.appendChild(o),this.selectedHtmlElement.appendChild(d)}}new E;
